<%- model_class = Location -%>

<%= stylesheet_link_tag "maps" %>
<%=javascript_include_tag("https://maps.googleapis.com/maps/api/js")%>
<script type="text/javascript">
    function initialize() {
        var myLatlng = new google.maps.LatLng(<%= @location.latitude%>,<%=@location.longitude%>);
        var mapOptions = {
            center: myLatlng,
            zoom: 12
        };
        var map = new google.maps.Map(document.getElementById('map-canvas'),
                mapOptions);
        var marker = new google.maps.Marker({
            position: myLatlng,
            map: map,
            title: '<%= @location.latitude%>'
        });
    }
    //do work
    google.maps.event.addDomListener(window, 'load', initialize);
</script>

<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.titleize %></h1>
</div>



<dl class="dl-horizontal">
  <dt><strong><%= model_class.human_attribute_name(:street) %>:</strong></dt>
  <dd><%= @location.street %></dd>
  <dt><strong><%= model_class.human_attribute_name(:city) %>:</strong></dt>
  <dd><%= @location.city %></dd>
  <dt><strong><%= model_class.human_attribute_name(:geographicalRegion) %>:</strong></dt>
  <dd><%= @location.geographicalRegion %></dd>
  <dt><strong><%= model_class.human_attribute_name(:country) %>:</strong></dt>
  <dd><%= @location.country %></dd>
  <dt><strong><%= model_class.human_attribute_name(:postal_code) %>:</strong></dt>
  <dd><%= @location.postal_code %></dd>
  <dt><strong><%= model_class.human_attribute_name(:business_id) %>:</strong></dt>
  <dd><%= @location.business_id %></dd>
  <dt><strong><%= model_class.human_attribute_name(:latitude) %>:</strong></dt>
  <dd><%= @location.latitude %></dd>
  <dt><strong><%= model_class.human_attribute_name(:longitude) %>:</strong></dt>
  <dd><%= @location.longitude %></dd>
</dl>


<h3>Hours:</h3>
<% timeformat = '%I:%M %p'%>
<dl class="dl-horizontal">
  <% if @location.monday_is_open%>
    <dt><strong>Monday:</strong></dt>
    <dd><%= "#{@location.monday_hours_open.strftime(timeformat)} - #{@location.monday_hours_close.strftime(timeformat)}" %></dd>
  <% end %>
  <% if @location.tuesday_is_open%>
      <dt><strong>Tuesday:</strong></dt>
      <dd><%= "#{@location.tuesday_hours_open.strftime(timeformat)} - #{@location.tuesday_hours_close.strftime(timeformat)}" %></dd>
  <%end%>
  <% if @location.wednesday_is_open%>

    <dt><strong>Wednesday:</strong></dt>
  <dd><%= "#{@location.wednesday_hours_open.strftime(timeformat)} - #{@location.wednesday_hours_close.strftime(timeformat)}" %></dd>
  <%end%>

  <% if @location.thursday_is_open%>
    <dt><strong>Thursday:</strong></dt>
    <dd><%= "#{@location.thursday_hours_open.strftime(timeformat)} - #{@location.thursday_hours_close.strftime(timeformat)}" %></dd>
  <%end%>
  <% if @location.friday_is_open%>
    <dt><strong>Friday:</strong></dt>
    <dd><%= "#{@location.friday_hours_open.strftime(timeformat)} - #{@location.friday_hours_close.strftime(timeformat)}" %></dd>
  <%end%>
  <% if @location.saturday_is_open%>
    <dt><strong>Saturday:</strong></dt>
    <dd><%= "#{@location.saturday_hours_open.strftime(timeformat)} - #{@location.saturday_hours_close.strftime(timeformat)}" %></dd>
  <%end%>
  <% if @location.sunday_is_open%>

    <dt><strong>Sunday:</strong></dt>
    <dd><%= "#{@location.sunday_hours_open.strftime(timeformat)} - #{@location.sunday_hours_close.strftime(timeformat)}" %></dd>
  <%end%>
</dl>

<div id="map-container">
  <div id="map-canvas"></div>
</div>

<%= link_to t('.back', :default => t("helpers.links.back")),
              location_path, :class => 'btn btn-default'  %>
<%= link_to t('.edit', :default => t("helpers.links.edit")),
              edit_location_path(@location), :class => 'btn btn-default' %>
<%= link_to t('.destroy', :default => t("helpers.links.destroy")),
              location_path(@location),
              :method => 'delete',
              :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
              :class => 'btn btn-danger' %>
